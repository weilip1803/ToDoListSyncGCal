# A0121528M
###### command\AddCommand.java
``` java
 */
public class AddCommand extends Command {

	/** Messaging **/
	private static final String MESSAGE_TASK_ADDED = "%s added";
	
	/** Command parameters **/
	private Item task;
	private boolean isUndo;

	/**
	 * Constructor for a normal add command
	 * 
	 * @param type
	 * @param title
	 * @param description
	 * @param priority
	 * @param status
	 * @param label
	 * @param startDate
	 * @param endDate
	 */
	public AddCommand(String type, String title, String description, String priority, String status, String label,
			Date startDate, Date endDate) {

		task = new Item();
		isUndo = false;
		assertNotNull(title);

		Long id = POMPOM.getStorage().getIdCounter();
		task.setId(id);
		task.setType(type);
		task.setTitle(title);
		task.setDescription(description);
		task.setPriority(priority);
		task.setStatus(status);
		task.setLabel(label);
		task.setStartDate(startDate);
		task.setEndDate(endDate);
		task.setRecurring(false);

		logger.log(Level.INFO, "AddCommand initialized");
	}

	/**
	 * Constructor for a recurring add command
	 * 
	 * @param type
	 * @param title
	 * @param description
	 * @param priority
	 * @param status
	 * @param label
	 * @param startDate
	 * @param endDate
	 * @param isRecurring
	 */
	public AddCommand(String type, String title, String description, String priority, String status, String label,
			Date startDate, Date endDate, boolean isRecurring) {

		task = new Item();
		isUndo = false;
		assertNotNull(title);

		Long id = POMPOM.getStorage().getIdCounter();
		task.setId(id);
		task.setType(type);
		task.setTitle(title);
		task.setDescription(description);
		task.setPriority(priority);
		task.setStatus(status);
		task.setLabel(label);
		task.setStartDate(startDate);
		task.setEndDate(endDate);
		task.setRecurring(false);

		logger.log(Level.INFO, "Recurring AddCommand initialized");
	}

	/**
	 * Constructor for an undo add command
	 * 
	 * @param id
	 * @param type
	 * @param title
	 * @param description
	 * @param priority
	 * @param status
	 * @param label
	 * @param startDate
	 * @param endDate
	 * @param isRecurring
	 * @param prevId
	 * @param nextId
	 */
	public AddCommand(Long id, String type, String title, String description, String priority, String status,
			String label, Date startDate, Date endDate, boolean isRecurring, Long prevId, Long nextId) {

		task = new Item();
		isUndo = true;
		assertNotNull(title); 

		task.setId(id);
		task.setType(type);
		task.setTitle(title);
		task.setDescription(description);
		task.setPriority(priority);
		task.setStatus(status);
		task.setLabel(label);
		task.setStartDate(startDate);
		task.setEndDate(endDate);
		task.setRecurring(isRecurring);
		task.setPrevId(prevId);
		task.setNextId(nextId);

		logger.log(Level.INFO, "Counter action AddCommand initialized");
	}

	
	/**
	 * Carries out the actual action of add task into taskList
	 */
	private void storeTask() {
		POMPOM.getStorage().getTaskList().add(task);
	}

	
	/**
	 * Creates the reverse action for undo. For AddCommand, the reverse would be DelCommand.
	 * 
	 * @return the reverse command
	 */
	private Command createCounterAction() {
		DelCommand counterAction = new DelCommand(task.getId(), true);
		return counterAction;
	}

	
	/**
	 * Adds the reverse command into the undo stack
	 */
	private void updateUndoStack() {
		Command counterAction = createCounterAction();
		POMPOM.getUndoStack().push(counterAction);
	}
	
	
	/**
	 * Sets the pointer of the recurring tasks.
	 * Like a linked list, when the middle element is deleted,
	 * the pointers of the previous node should link to the next node.
	 */
	private void setProperPointers() {
		
		Item currentTask = task;
		
		if (!(currentTask.getPrevId() == null)) {
			Item prevTask = getTask(currentTask.getPrevId());
			prevTask.setNextId(currentTask.getId());
		}
		
		if (!(currentTask.getNextId() < currentTask.getId())) {
			Item nextTask = getTask(currentTask.getNextId());
			nextTask.setPrevId(currentTask.getId());
		}
		
	}
	
	
	/**
	 * Sets the proper return message to return
	 */
	private void setProperReturnMsg() {
		
		if (task.getType().equals(POMPOM.LABEL_EVENT)) {
			returnMsg = String.format(MESSAGE_TASK_ADDED, POMPOM.LABEL_EVENT);
		} else {
			returnMsg = String.format(MESSAGE_TASK_ADDED, POMPOM.LABEL_TASK);
		}
		
	}

	
	/**
	 * Executes all the actions needed when a add command is invoked
	 * 
	 * @return the appropriate feedback message 
	 */
	public String execute() {

		if (!isUndo) {
			updateUndoStack();
		}
		
		storeTask();

		if (task.isRecurring()) {
			setProperPointers();
		}

		setProperReturnMsg();
		POMPOM.refreshStatus();
		showCorrectTab(task);
		
		logger.log(Level.INFO, "AddCommand has be executed");
		return returnMsg;
	}

}
```
###### command\AddRecurringCommand.java
``` java
 */
public class AddRecurringCommand extends Command {

	/** Messaging **/
	private static final String MESSAGE_RECURRING = "Recurring tasks has been added";

	/** Command Parameters **/
	ArrayList<AddCommand> addList;
	ArrayList<Item> itemList; 
	ArrayList<Item> taskList = getTaskList();
	Long firstId = null, prevId = null, currentId, nextId = null;
	Long[] idList;
	boolean isUndo;

	
	/**
	 * Constructor for AddRecurringCommand object
	 * 
	 * @param addList
	 */
	public AddRecurringCommand(ArrayList<AddCommand> addList) {
		this.addList = addList;
		this.idList = new Long[addList.size()];
		this.isUndo = false;
		
		logger.log(Level.INFO, "AddRecurringCommand initialized");
	}
	
	
	/**
	 * Constructor for a undo AddRecurringCommand object
	 * 
	 * @param itemList
	 * @param isUndo
	 */
	public AddRecurringCommand(ArrayList<Item> itemList, boolean isUndo) {
		this.itemList = itemList;
		this.isUndo = true;
		
		logger.log(Level.INFO, "Counter AddRecurringCommand initialized");
	}
	
	
	/**
	 * Creates the reverse action for undo. For AddRecurringCommand, the reverse would be DelRecurringCommand.
	 * 
	 * @return the reverse command
	 */
	private Command createCounterAction() {
		return new DelRecurringCommand(idList);
	}
	
	
	/**
	 * Adds the reverse command into the undo stack
	 */
	private void updateUndoStack() {
		Command counterAction = createCounterAction();
		POMPOM.getUndoStack().push(counterAction);
	}

	
	/**
	 * Executes all the actions needed when an AddRecurringCommand is invoked
	 * 
	 * @return the appropriate feedback message 
	 */
	public String execute() {

		if (isUndo) {
			
			for (int i = 0; i < itemList.size(); i++) {
				taskList.add(itemList.get(i));
			}
			
			logger.log(Level.INFO, "AddRecurringCommand has been executed");
			returnMsg = MESSAGE_RECURRING;
			POMPOM.refreshStatus();
			showCorrectTab(itemList.get(0));
			
		} else {
			
			for (int i = 0; i < addList.size(); i++) {

				addList.get(i).execute();
				Item currentTask = taskList.get(taskList.size() - 1);
				currentId = currentTask.getId();
				
				// Sets the linking pointers
				currentTask.setRecurring(true);
				currentTask.setPrevId(prevId);
				prevId = currentId;
				idList[i] = currentId;

				// Saves the firstId
				if (i == 0) {
					firstId = currentId;
				}
				
				if (i == addList.size() - 1) {
					nextId = firstId;
				} else {
					nextId = currentId + 1;
				}
				
				currentTask.setNextId(nextId);

			}
			
			updateUndoStack();
			POMPOM.refreshStatus();
			//showCorrectTab(getTask(firstId));
			logger.log(Level.INFO, "AddRecurringCommand has been executed");
			returnMsg = MESSAGE_RECURRING;
		}
		
		return returnMsg;
	}

}
```
